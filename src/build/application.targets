<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!--<Import Project = "C:\Program Files\MSBuild\ExtensionPack\4.0\MSBuild.ExtensionPack.VersionNumber.targets" />-->
  <!--<Import Project="$(MSBuildExtensionsPath)\MSBuildCommunityTasks\MSBuild.Community.Tasks.Targets"/>-->
  <UsingTask TaskName="TransformXml" AssemblyFile="$(MSBuildExtensionsPath)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.dll" />
  <PropertyGroup>
    <PrePublishTargets>Clean;Build</PrePublishTargets>
    <TransformConfigFile></TransformConfigFile>
  </PropertyGroup>
  <ItemGroup>
    <TestProjects Include="unittest">
      <ProjectFile>../BlogSite.Tests/BlogSite.Tests.csproj</ProjectFile>
    </TestProjects>
    <TestProjects Include="functionaltest">
      <ProjectFile>../Blogsite.FunctionalTest/Blogsite.FunctionalTest.csproj</ProjectFile>
    </TestProjects>
    <TestProjects Include="integrationtest">
      <ProjectFile>../Blogsite.IntegrationTest/Blogsite.IntegrationTest.csproj</ProjectFile>
    </TestProjects>
    <TestProjects Include="regressiontest">
      <ProjectFile>../Blogsite.RegressionTest/Blogsite.RegressionTest.csproj</ProjectFile>
    </TestProjects>
  </ItemGroup>
  <Target Name="BuildApplication" DependsOnTargets="$(PrePublishTargets)">
  </Target>

  <Target Name="ConfigTransformation" DependsOnTargets="BuildApplication">
    <TransformXml Source ="Web.config" Transform="Web.$(Configuration).config" Destination="$(OutputPath)Web.config"/>
  </Target>

  <Target Name="RunTestCases" DependsOnTargets="$(PrePublishTargets)">
    <MSBuild Projects="%(TestProjects.ProjectFile)" Targets="RunTest" ContinueOnError="false"/>
  </Target>
</Project>